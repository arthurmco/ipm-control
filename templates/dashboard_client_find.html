<!DOCTYPE html5>
<html>
  <head>
    <meta charset="utf-8" />
    <title>IPM - Procurar cliente</title>

    <script type="text/javascript">
      function load_clients() {
         var clientul = document.getElementById('client_search').getElementsByTagName('ul')[0];
         var clientname = document.getElementById('client_name').value;
         var xhttp = new XMLHttpRequest();
         xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                clients = JSON.parse(this.responseText);
                console.log(clients)

                clientul.innerHTML = "";
      
                for(var i = 0; i < clients.length; i++) {
                    var li = document.createElement("li");
		    var li_text = document.createTextNode(clients[i].name);
		    li.appendChild(li_text);
                    clientul.appendChild(li);
		}
      
            }
         };
				   
         xhttp.open("GET", " {{ url_for('search_client') }}?name=" + clientname,
true);
         xhttp.send();
      }
    </script>
    
  </head>
  <body onload="load_clients()">
    <header>
      <span id="name">NAME</span> |
      <a href=" {{ url_for('logout') }} ">Logout</a>
    </header>

    <article>
      <h1>Procurar cliente</h1>
      <form action=" {{ url_for('dashboard_client_find') }} " method="get">
	<input type="text" id="client_name" name="client_name"
	       placeholder="Nome do cliente"
	       value="{{ client }}" />
	       
	<input type="submit" value="Pesquisar" />
      </form>

      <div id="client_search">
	<ul>

	</ul>
      </div>
      
    </article>
    
  </body>  
</html>
